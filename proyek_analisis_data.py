# -*- coding: utf-8 -*-
"""Proyek Analisis Data.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1SMKC6ibrFSe57QkcqXzq-F1b6sDwqjww

# Proyek Analisis Data: Bike Sharing Dataset
- **Nama:** Lanyta Setyani Gunawan
- **Email:** lanytagunawan5@gmail.com
- **ID Dicoding:** lany_tan19

## Menentukan Pertanyaan Bisnis

- Spesicifict
  1.   Berapa total sepeda yang disewakan (cnt) selama musim gugur tahun 2012?
- Measurable
  2. Berapa banyak sepeda sewa yang digunakan pada hari libur (liburan = 1) selama musim panas (musim 2) tahun 2011?
- Action-oriented
  3. Bagaimana meningkatkan jumlah sepeda yang disewakan oleh pengguna casual pada hari kerja (hari kerja = 1)?
- Relevant
  4. Bagaimana suhu (temp) berhubungan dengan jumlah pengguna terdaftar (registered)?
  5. Apa dampak cuaca (weathersit) terhadap jumlah peminjaman sepeda (cnt) selama musim gugur (musim 3)?
- Time Bound:
  6. Bagaimana distribusi per jam peminjaman sepeda (cnt) pada Hari Natal (hari libur = 1) tahun 2012 (tahun = 1)?

## Import Semua Packages/Library yang Digunakan
"""

import pandas as pd
import plotly.express as px
import warnings

"""## Data Wrangling

### Gathering Data
"""

df_day = pd.read_csv("/content/day.csv")
df_hour = pd.read_csv("/content/hour.csv")

df_hour.head()

"""### Assessing Data

### - Data Type
"""

print('Dataframe day:')
print(df_day.info())

print('\nDataframe hour:')
print(df_hour.info())

"""### - Missing Value"""

print('Dataframe day:')
print(df_day.isna().sum())

print('\nDataframe hour:')
print(df_hour.isna().sum())

"""### - Duplicate Data"""

print('Dataframe day:', df_day.duplicated().sum())
print("Dataframe hour:", df_hour.duplicated().sum())

"""### - Descriptive Statistics"""

df_day.describe()

"""### Cleaning Data

### - Fixed Data Type
"""

# df_day
df_day["dteday"] = pd.to_datetime(df_day["dteday"])
# df_hour
df_hour["dteday"] = pd.to_datetime(df_hour["dteday"])

# Cek data type for df_day and df_hour
print('df_day["dteday"] : ', df_day["dteday"].dtypes)
print('df_hour["dteday"] : ', df_hour["dteday"].dtypes)

"""## Exploratory Data Analysis (EDA)

### Korelasi antara Variabel Numerik
"""

warnings.filterwarnings("ignore")

# df_day
correlation_matrix = df_day.corr()
fig = px.imshow(correlation_matrix)
fig.update_layout(title="Korelasi antara Variabel Numerik")
fig.show()

"""### Distribusi antara Variabel Numerik"""

numeric_cols = ['temp', 'atemp', 'hum', 'windspeed', 'casual', 'registered', 'cnt']
for col in numeric_cols:
    fig = px.histogram(df_day, x=col, title=f'Distribusi {col}')
    fig.show()

"""### Distribusi Variabel Kategorikal"""

categorical_cols = ['season', 'yr', 'mnth', 'holiday', 'weekday', 'workingday', 'weathersit']
for col in categorical_cols:
    fig = px.bar(df_day[col].value_counts().reset_index(), x='index', y=col)
    fig.update_layout(title=f'Distribusi {col}')
    fig.show()

"""### Hubungan antara musim(season) dan jumlah sewa(cnt)"""

fig = px.box(df_day, x='season', y='cnt')
fig.update_layout(title='Hubungan antara Musim dan Jumlah Sewa')
fig.show()

"""### Hubungan antara hari libur(holiday) dan jumlah sewa(cnt)"""

fig = px.box(df_day, x='holiday', y='cnt')
fig.update_layout(title='Hubungan antara Hari Libur dan Jumlah Sewa')
fig.show()

"""### Hubungan antara cuaca (weathersit) dan jumlah sewa (cnt)"""

fig = px.box(df_day, x='weathersit', y='cnt')
fig.update_layout(title='Hubungan antara Cuaca dan Jumlah Sewa')
fig.show()

"""### Scatter plot antara suhu (temp) dan jumlah sewa (cnt)"""

fig = px.scatter(df_day, x='temp', y='cnt', title='Scatter Plot antara Suhu dan Jumlah Sewa')
fig.show()

"""## Visualization & Explanatory Analysis

### Pertanyaan 1:

Berapa total sepeda yang disewakan (cnt) selama musim gugur tahun 2012?
"""

# Filter tahun 2012 dan musim gugur (season 3)
filtered_data = df_day[(df_day["yr"] == 1) & (df_day["season"] == 3)]

# Hitung jumlah total sewa sepeda (cnt)
total_sewa_sepeda = filtered_data["cnt"].sum()

print("Jumlah total sewa sepeda untuk tahun 2012 selama musim gugur (musim 3):", total_sewa_sepeda)

"""### Pertanyaan 2:

Berapa banyak sepeda sewa yang digunakan pada hari libur (liburan = 1) selama musim panas (musim 2) tahun 2011?
"""

# Filter tahun 2011, musim panas (season 2), dan hari libur (holiday = 1)
filtered_data = df_day[(df_day["yr"] == 0) & (df_day["season"] == 2) & (df_day["holiday"] == 1)]

# Hitung jumlah total sepeda sewaan
total_sepeda_sewaan = filtered_data["cnt"].sum()

print("Jumlah total sepeda sewaan yang digunakan pada hari libur selama musim panas tahun 2011:", total_sepeda_sewaan)

"""### Pertanyaan 3:

Bagaimana meningkatkan jumlah sepeda yang disewakan oleh pengguna casual pada hari kerja (hari kerja = 1)?
"""

# Filter pengguna casual (casual) pada hari kerja (workingday = 1)
filtered_data = df_day[(df_day["workingday"] == 1) & (df_day["casual"] > 0)]

# Visualisasikan jumlah sewa sepeda casual pada hari kerja
fig = px.bar(filtered_data, x="weekday", y="casual", title="Jumlah Sewa Sepeda Casual pada Hari Kerja")
fig.update_xaxes(title="Hari Kerja")
fig.update_yaxes(title="Jumlah Sewa Sepeda Casual")
fig.show()

"""Strategi:
- Rencana promosi spesial untuk hari-hari dengan tingkat peminjaman rendah, seperti pada hari Senin dan Rabu, melibatkan penawaran eksklusif atau diskon khusus yang hanya berlaku pada hari kerja.
- Memastikan ketersediaan dan kelayakan fasilitas penyewaan sepeda, seperti stasiun atau lokasi penyewaan, selama hari kerja agar mudah diakses dan dalam kondisi baik.
- Pertimbangkan penambahan jumlah sepeda yang dapat disewa pada hari kerja untuk mengakomodasi permintaan yang lebih tinggi pada periode tersebut.
- Tingkatkan upaya pemasaran khusus untuk hari kerja, termasuk kampanye iklan online yang secara khusus ditargetkan pada pengguna reguler selama hari kerja.
- Implementasikan program loyalitas atau penawaran diskon berkelanjutan untuk pengguna biasa yang sering melakukan peminjaman sepeda pada hari kerja.

### Pertanyaan *4*:

Bagaimana suhu (temp) berhubungan dengan jumlah pengguna terdaftar (registered)?
"""

# Buat scatter plot dengan Plotly untuk memvisualisasikan hubungan suhu (temp) dengan jumlah pengguna terdaftar (registered)
fig = px.scatter(df_day, x="temp", y="registered", title="Hubungan Suhu dengan Jumlah Pengguna Terdaftar")
fig.update_xaxes(title="Suhu (temp)")
fig.update_yaxes(title="Jumlah Pengguna Terdaftar")
fig.show()

"""Insight

Dari grafik, terlihat adanya hubungan positif antara suhu (temp) dan jumlah pengguna terdaftar, menunjukkan bahwa kenaikan suhu juga berdampak pada peningkatan jumlah pengguna yang terdaftar.

### Pertanyaan *5*:

Apa dampak cuaca (weathersit) terhadap jumlah peminjaman sepeda (cnt) selama musim gugur (musim 3)?
"""

# Filter musim gugur (season 3)
filtered_data = df_day[df_day["season"] == 3]

# Buat plot dengan Plotly untuk menganalisis pengaruh cuaca terhadap jumlah sewa sepeda
fig = px.bar(filtered_data, x="weathersit", y="cnt", title="Pengaruh Cuaca terhadap Jumlah Sewa Sepeda (Musim Gugur)")
fig.update_xaxes(title="Cuaca (weathersit)")
fig.update_yaxes(title="Jumlah Sewa Sepeda (cnt)")

# Tampilkan plot
fig.show()

"""Info

weathersit :
1: Clear, Few clouds, Partly cloudy, Partly cloudy
2: Mist + Cloudy, Mist + Broken clouds, Mist + Few clouds, Mist
3: Light Snow, Light Rain + Thunderstorm + Scattered clouds, Light Rain + Scattered clouds
4: Heavy Rain + Ice Pallets + Thunderstorm + Mist, Snow + Fog

Insight

Berdasarkan analisis grafik yang telah dilakukan, kita dapat menyimpulkan bahwa cuaca memiliki dampak yang signifikan terhadap jumlah sepeda yang disewa. Dari grafik tersebut, terlihat bahwa perubahan kondisi cuaca memengaruhi perilaku pengguna sepeda secara nyata. Secara lebih rinci, observasi menunjukkan bahwa pada kondisi cuaca tertentu, seperti cuaca cerah atau sebagian berawan (weathersit 1), terjadi peningkatan yang signifikan dalam jumlah sepeda yang disewa.

  Hasil analisis ini memberikan indikasi bahwa faktor-faktor seperti kondisi cuaca memainkan peran penting dalam menentukan permintaan sepeda. Informasi ini dapat menjadi nilai tambah bagi penyedia layanan sewa sepeda, membantu mereka dalam pengelolaan stok sepeda, penyesuaian tarif, dan pengembangan strategi pemasaran yang lebih efektif berdasarkan variasi cuaca.

### Pertanyaan *6*:

Bagaimana distribusi per jam peminjaman sepeda (cnt) pada Hari Natal (hari libur = 1) tahun 2012 (tahun = 1)?
"""

# Filter data tahun 2012 (yr = 1), Hari Natal (holiday = 1), dan musim panas (season 2)
filtered_data = df_hour[(df_hour["yr"] == 1) & (df_hour["holiday"] == 1) & (df_hour["season"] == 2)]

# Hitung distribusi per jam sewa sepeda (cnt)
distribusi_per_jam = filtered_data.groupby("hr")["cnt"].sum()

print("Distribusi per jam sewa sepeda pada Hari Natal tahun 2012:")
print(distribusi_per_jam)

"""Insight

Pada pukul 17:00 (5:00 sore), terlihat lonjakan tertinggi dalam jumlah sewa sepeda, mencapai 1.117 sewa. Hal ini mungkin disebabkan oleh banyaknya orang yang memilih bersepeda sebagai kegiatan liburan Natal pada waktu tersebut. Selain itu, aktivitas sewa sepeda mulai meningkat sejak pukul 6:00 pagi dan mencapai puncaknya antara pukul 17:00 dan 18:00. Setelah itu, terjadi penurunan perlahan dalam jumlah sewa sepeda hingga larut malam.

Analisis ini mencerminkan pola penggunaan sepeda selama Hari Natal, mencerminkan kegiatan liburan dan rutinitas masyarakat pada tanggal tersebut.

## Conclusion

- Keberhasilan bisnis sewa sepeda pada musim gugur 2012, yang mencapai total 641.479 penyewaan, mengindikasikan potensi bisnis yang kuat. Faktor penentu seperti cuaca, acara, dan promosi secara bersama-sama mempengaruhi tingkat permintaan.
- Jumlah sepeda sewaan yang digunakan selama liburan musim panas 2011 sebanyak 7.224 menunjukkan popularitas bersepeda saat liburan, mencerminkan investasi dalam infrastruktur sepeda dan meningkatnya minat masyarakat terhadap kegiatan ini.
- Puncak aktivitas sewa sepeda terjadi pada hari Jumat, menunjukkan bahwa penggunaan sepeda meningkat secara signifikan menjelang akhir pekan. Hal ini dapat menjadi titik fokus untuk strategi pemasaran dan alokasi sumber daya.
- Analisis hubungan antara suhu dan jumlah pengguna terdaftar menyiratkan bahwa cuaca memiliki dampak langsung terhadap minat masyarakat terhadap bersepeda, di mana peningkatan suhu cenderung meningkatkan jumlah pengguna.
- Distribusi sewa sepeda pada Hari Natal tahun 2012 menunjukkan puncak aktivitas antara jam 17:00 hingga 18:00 dengan 1.117 penyewaan, mencerminkan minat yang tinggi pada waktu tersebut. Ini dapat menjadi wawasan berharga untuk perencanaan operasional pada hari libur khusus.
- Peningkatan aktivitas sewa sepeda sejak pukul 8 pagi pada Hari Natal menyoroti potensi kegiatan bersepeda sebagai bagian dari perayaan tersebut. Pemahaman ini dapat membantu dalam pengembangan inisiatif khusus untuk meningkatkan partisipasi masyarakat pada acara-acara serupa di masa depan.
"""